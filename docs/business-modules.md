# 业务模块

## 目录

- [核心功能模块](#核心功能模块)
- [辅助功能模块](#辅助功能模块)
- [运营管理模块](#运营管理模块)
- [数据分析模块](#数据分析模块)
- [模块关系图](#模块关系图)
- [数据库设计](#数据库设计)

## 核心功能模块

### 1. 用户系统

#### 1.1 注册 / 登录
- **功能点**：
  - 手机号 / 邮箱注册
  - 密码登录
  - 短信验证码登录
  - 第三方登录（微信、QQ、GitHub）
  - 忘记密码 / 重置密码
  - 账号绑定

- **技术实现**：
  - JWT Token 认证
  - OAuth 2.0（第三方登录）
  - 验证码服务（阿里云、腾讯云）
  - 密码加密（bcrypt）

#### 1.2 用户角色
- **角色类型**：
  - **学生**：学习、练习、创作
  - **教师**：教学、批改、管理
  - **家长**：监督、查看学情
  - **管理员**：系统管理、运营
  
- **权限管理**：
  - RBAC（基于角色的访问控制）
  - 权限继承
  - 动态权限配置

#### 1.3 个人中心
- **基本信息**：
  - 头像、昵称、性别、年龄
  - 学校、年级、班级
  - 联系方式
  - 个人简介

- **账号设置**：
  - 修改密码
  - 绑定手机 / 邮箱
  - 隐私设置
  - 通知设置

#### 1.4 学习档案
- **学习数据**：
  - 学习时长
  - 完成课程数
  - 练习题数
  - 项目作品数
  - 学习轨迹

- **能力评估**：
  - 知识点掌握度
  - 能力雷达图
  - 学习曲线
  - 进步报告

#### 1.5 成就系统
- **成就类型**：
  - 学习成就（完成课程、连续学习）
  - 练习成就（刷题、通关）
  - 创作成就（发布作品、获赞）
  - 社交成就（评论、帮助他人）

- **激励机制**：
  - 徽章收集
  - 等级体系
  - 积分系统
  - 排行榜

---

### 2. 课程系统

#### 2.1 课程分类
- **按年龄段**：
  - 幼儿（4-6 岁）
  - 小学低年级（7-9 岁）
  - 小学高年级（10-12 岁）
  - 初中（13-15 岁）
  - 高中（16-18 岁）

- **按编程语言**：
  - 图形化编程（Scratch）
  - Python
  - JavaScript / Web
  - C++
  - Java

- **按学习目标**：
  - 编程启蒙
  - 算法竞赛
  - 应用开发
  - 人工智能
  - 游戏开发

#### 2.2 课程结构
- **课程信息**：
  - 课程标题、封面
  - 课程简介、目标
  - 适用年龄、难度
  - 预计时长
  - 讲师信息

- **章节管理**：
  - 多级章节结构
  - 章节顺序
  - 前置课程
  - 解锁条件

- **课时内容**：
  - 视频讲解
  - 图文教程
  - 互动练习
  - 编程实践
  - 课后作业

#### 2.3 学习进度
- **进度跟踪**：
  - 当前学习位置
  - 完成百分比
  - 学习时长统计
  - 最后学习时间

- **学习状态**：
  - 未开始
  - 学习中
  - 已完成
  - 已过期

#### 2.4 课程评价
- **评价内容**：
  - 星级评分
  - 文字评价
  - 标签（生动、易懂、实用等）
  - 评价时间

- **评价展示**：
  - 总体评分
  - 评价列表
  - 热门评价
  - 评价统计

#### 2.5 课程推荐
- **推荐算法**：
  - 基于年龄和等级
  - 基于学习历史
  - 协同过滤
  - 热门课程

- **个性化推荐**：
  - 为你推荐
  - 继续学习
  - 相关课程

---

### 3. 编程环境

#### 3.1 在线代码编辑器
- **基础功能**：
  - 语法高亮
  - 代码补全
  - 代码折叠
  - 多标签页
  - 全屏模式

- **高级功能**：
  - 智能提示
  - 代码格式化
  - 错误标注
  - 多光标编辑
  - Vim / Emacs 模式

- **界面布局**：
  - 代码编辑区
  - 运行结果区
  - 控制台输出
  - 文件树（多文件项目）

#### 3.2 代码执行
- **支持语言**：
  - Python
  - JavaScript
  - C / C++
  - Java
  - HTML / CSS / JS（Web 预览）

- **执行方式**：
  - 在线运行
  - 实时预览（Web）
  - 沙箱隔离
  - 资源限制

- **输入输出**：
  - 标准输入
  - 标准输出
  - 错误输出
  - 文件上传

#### 3.3 调试工具
- **调试功能**：
  - 断点调试
  - 单步执行
  - 变量查看
  - 调用栈
  - 控制台

- **可视化调试**：
  - 变量可视化
  - 数据结构可视化
  - 执行流程图

#### 3.4 代码保存和分享
- **保存功能**：
  - 自动保存
  - 版本历史
  - 云端同步
  - 本地下载

- **分享功能**：
  - 生成分享链接
  - 嵌入代码
  - 导出项目
  - Fork / Remix

#### 3.5 多语言支持
- **语言切换**：
  - 语言选择器
  - 模板代码
  - 语言特定配置

#### 3.6 代码模板库
- **模板分类**：
  - 语言基础模板
  - 算法模板
  - 项目模板
  - 示例代码

---

### 4. 项目实战

#### 4.1 项目库
- **项目分类**：
  - 游戏项目
  - 网站项目
  - 应用项目
  - 算法可视化
  - 创意艺术

- **项目信息**：
  - 项目名称、封面
  - 项目描述
  - 难度级别
  - 所需技能
  - 预计时长

#### 4.2 项目创建
- **创建方式**：
  - 从模板创建
  - 从头开始
  - 导入项目

- **项目设置**：
  - 项目名称、描述
  - 封面图片
  - 标签
  - 公开 / 私有

#### 4.3 项目分享社区
- **社区功能**：
  - 项目展示墙
  - 分类浏览
  - 搜索过滤
  - 热门排行
  - 最新发布

- **互动功能**：
  - 点赞 / 收藏
  - 评论讨论
  - 分享转发

#### 4.4 作品展示
- **展示页面**：
  - 作品演示
  - 源码查看
  - 作者信息
  - 创作说明

- **多媒体支持**：
  - 截图 / 视频演示
  - 在线运行
  - 下载项目

#### 4.5 Remix 功能
- **Remix 机制**：
  - 一键复制项目
  - 标注原作者
  - Remix 链
  - 创意衍生

---

### 5. 练习评测

#### 5.1 题库管理
- **题目分类**：
  - 按难度（简单、中等、困难）
  - 按知识点（循环、数组、递归等）
  - 按类型（选择题、填空题、编程题）
  - 按来源（自研、竞赛、面试）

- **题目结构**：
  - 题目描述
  - 输入输出格式
  - 样例数据
  - 数据范围
  - 时空限制

#### 5.2 自动评测
- **评测流程**：
  ```
  提交代码 → 编译 → 运行测试用例 → 对比输出 → 返回结果
  ```

- **评测结果**：
  - AC（通过）
  - WA（答案错误）
  - TLE（超时）
  - MLE（内存超限）
  - RE（运行错误）
  - CE（编译错误）

- **详细反馈**：
  - 测试用例通过情况
  - 错误提示
  - 运行时间、内存
  - 代码优化建议

#### 5.3 错题本
- **功能**：
  - 自动收集错题
  - 错题分类
  - 重做练习
  - 错题解析

#### 5.4 智能推题
- **推荐策略**：
  - 基于知识点掌握度
  - 基于错题分析
  - 难度自适应
  - 个性化练习

#### 5.5 通关模式
- **游戏化设计**：
  - 关卡地图
  - 星级评价
  - 解锁机制
  - 挑战模式

#### 5.6 实时排行榜
- **排行榜类型**：
  - 做题数量榜
  - 通过率榜
  - 速度榜
  - 周榜 / 月榜 / 总榜

---

### 6. 教学管理

#### 6.1 班级管理
- **班级创建**：
  - 班级名称、简介
  - 班级人数上限
  - 加入方式（邀请码、审核）

- **成员管理**：
  - 学生列表
  - 添加 / 移除学生
  - 角色分配（班长、组长）

#### 6.2 作业发布
- **作业创建**：
  - 作业标题、描述
  - 题目选择（题库 / 自定义）
  - 截止时间
  - 分数设置

- **作业类型**：
  - 练习作业（自动评测）
  - 项目作业（人工批改）
  - 测验（限时）

#### 6.3 作业批改
- **自动批改**：
  - 编程题自动评测
  - 选择题自动判分

- **人工批改**：
  - 查看学生作品
  - 评分和评语
  - 批注功能

- **批改统计**：
  - 完成情况
  - 分数分布
  - 正确率分析

#### 6.4 学情分析
- **个人学情**：
  - 学习进度
  - 作业完成率
  - 知识点掌握
  - 能力评估

- **班级学情**：
  - 整体进度
  - 平均分
  - 知识点薄弱项
  - 学生对比

#### 6.5 教学日历
- **日历功能**：
  - 课程安排
  - 作业截止
  - 测验时间
  - 活动提醒

#### 6.6 课堂互动
- **实时互动**：
  - 在线直播
  - 屏幕共享
  - 举手提问
  - 投票问答

- **课堂练习**：
  - 即时练习
  - 实时统计
  - 结果展示

---

### 7. AI 辅助

#### 7.1 智能提示
- **代码提示**：
  - 语法补全
  - 函数建议
  - 参数提示
  - 最佳实践

#### 7.2 代码纠错
- **错误检测**：
  - 语法错误
  - 逻辑错误
  - 性能问题
  - 安全漏洞

- **修复建议**：
  - 错误说明
  - 修复方案
  - 示例代码

#### 7.3 学习路径推荐
- **个性化路径**：
  - 基于能力评估
  - 基于学习目标
  - 动态调整

#### 7.4 虚拟助教
- **智能问答**：
  - 自然语言交互
  - 概念解释
  - 代码解读
  - 学习建议

#### 7.5 代码解释
- **功能**：
  - 逐行解释
  - 算法分析
  - 复杂度分析
  - 可视化演示

---

### 8. 游戏化激励

#### 8.1 积分系统
- **获取积分**：
  - 完成课程
  - 完成练习
  - 发布作品
  - 帮助他人
  - 每日签到

- **积分用途**：
  - 兑换奖励
  - 解锁特权
  - 排行榜

#### 8.2 徽章成就
- **徽章分类**：
  - 学习徽章
  - 练习徽章
  - 创作徽章
  - 社交徽章
  - 特殊徽章

- **徽章展示**：
  - 徽章墙
  - 佩戴徽章
  - 稀有度

#### 8.3 等级体系
- **等级设计**：
  - 经验值累积
  - 等级划分（青铜、白银、黄金等）
  - 等级特权
  - 升级奖励

#### 8.4 排行榜
- **排行榜类型**：
  - 学习排行
  - 练习排行
  - 作品排行
  - 班级排行

- **时间维度**：
  - 日榜、周榜、月榜
  - 历史总榜

#### 8.5 每日任务
- **任务类型**：
  - 学习任务
  - 练习任务
  - 社交任务
  - 签到任务

- **奖励机制**：
  - 积分奖励
  - 道具奖励
  - 连续完成奖励

#### 8.6 活动赛事
- **活动类型**：
  - 编程挑战赛
  - 作品创作赛
  - 知识竞答
  - 主题活动

- **赛事功能**：
  - 报名参赛
  - 实时排名
  - 颁奖典礼

---

### 9. 社交社区

#### 9.1 作品分享
- **分享功能**：
  - 发布作品
  - 作品描述
  - 标签分类
  - 多媒体展示

#### 9.2 学习圈子
- **圈子类型**：
  - 主题圈（Python、Scratch 等）
  - 地区圈
  - 学校圈
  - 兴趣圈

- **圈子功能**：
  - 发帖讨论
  - 资源分享
  - 活动组织

#### 9.3 话题讨论
- **话题广场**：
  - 热门话题
  - 最新话题
  - 话题分类

- **讨论功能**：
  - 发起话题
  - 回复评论
  - 投票调查

#### 9.4 好友系统
- **好友功能**：
  - 添加好友
  - 好友列表
  - 好友动态
  - 互相关注

#### 9.5 私信功能
- **消息类型**：
  - 文字消息
  - 图片 / 代码分享
  - 系统通知

---

## 辅助功能模块

### 10. 支付系统

#### 10.1 课程购买
- **购买方式**：
  - 单课程购买
  - 课程包购买
  - 会员订阅

- **支付渠道**：
  - 微信支付
  - 支付宝
  - 银行卡支付

#### 10.2 会员订阅
- **会员类型**：
  - 月度会员
  - 季度会员
  - 年度会员

- **会员特权**：
  - 全部课程免费
  - 专属客服
  - 优先体验新功能
  - 更多学习资源

#### 10.3 优惠券
- **优惠券类型**：
  - 满减券
  - 折扣券
  - 兑换券

- **发放方式**：
  - 活动赠送
  - 任务奖励
  - 推荐奖励

#### 10.4 团购拼课
- **功能**：
  - 发起拼团
  - 分享邀请
  - 成团优惠

#### 10.5 退款管理
- **退款规则**：
  - 未学习可退款
  - 部分学习按比例退款
  - 退款审核流程

---

## 运营管理模块

### 11. 内容管理（CMS）

#### 11.1 课程管理
- **课程 CRUD**
- **课程上下架**
- **课程排序**
- **批量操作**

#### 11.2 题库管理
- **题目 CRUD**
- **批量导入**
- **题目审核**

#### 11.3 内容审核
- **审核对象**：
  - 用户作品
  - 评论内容
  - 用户头像 / 昵称

- **审核机制**：
  - 自动审核（敏感词过滤）
  - 人工审核
  - 用户举报

---

### 12. 运营管理

#### 12.1 活动管理
- **活动类型**：
  - 限时优惠
  - 节日活动
  - 竞赛活动
  - 新人活动

- **活动配置**：
  - 活动时间
  - 活动规则
  - 奖励设置
  - 页面配置

#### 12.2 消息推送
- **推送类型**：
  - 系统通知
  - 活动通知
  - 学习提醒
  - 作业提醒

- **推送渠道**：
  - 站内消息
  - 邮件
  - 短信
  - App 推送

#### 12.3 客服系统
- **客服功能**：
  - 在线聊天
  - 工单系统
  - 常见问题（FAQ）
  - 智能客服（AI）

#### 12.4 问卷调查
- **功能**：
  - 创建问卷
  - 分发问卷
  - 数据统计
  - 结果分析

---

## 数据分析模块

### 13. 数据统计

#### 13.1 学习数据
- **统计指标**：
  - 学习时长
  - 完成课程数
  - 练习题数
  - 正确率
  - 活跃度

#### 13.2 用户行为分析
- **行为追踪**：
  - 页面访问
  - 点击行为
  - 学习路径
  - 停留时长

- **分析维度**：
  - 用户画像
  - 漏斗分析
  - 留存分析
  - 转化分析

#### 13.3 教学效果评估
- **评估指标**：
  - 课程完成率
  - 知识点掌握度
  - 学习成绩提升
  - 满意度调查

#### 13.4 运营数据看板
- **核心指标**：
  - DAU / MAU
  - 新增用户
  - 付费用户
  - 收入统计
  - 课程销量

- **可视化展示**：
  - 实时数据大屏
  - 图表分析
  - 趋势预测

---

## 模块关系图

```
┌─────────────────────────────────────────────────────────┐
│                      前端应用层                          │
├─────────────────────────────────────────────────────────┤
│  用户端    │   教师端   │   家长端   │   管理端         │
└─────────────────────────────────────────────────────────┘
                          ↓↑
┌─────────────────────────────────────────────────────────┐
│                      业务服务层                          │
├─────────────────────────────────────────────────────────┤
│  用户服务  │  课程服务  │  评测服务  │  社区服务         │
│  支付服务  │  AI 服务   │  运营服务  │  数据服务         │
└─────────────────────────────────────────────────────────┘
                          ↓↑
┌─────────────────────────────────────────────────────────┐
│                      数据存储层                          │
├─────────────────────────────────────────────────────────┤
│  MySQL     │  MongoDB   │  Redis     │  对象存储         │
└─────────────────────────────────────────────────────────┘
```

---

## 数据库设计

### 核心数据表

#### 用户相关
- `users`：用户基本信息
- `user_profiles`：用户详细资料
- `user_roles`：用户角色
- `user_achievements`：用户成就

#### 课程相关
- `courses`：课程信息
- `chapters`：章节
- `lessons`：课时
- `course_progress`：学习进度
- `course_reviews`：课程评价

#### 练习相关
- `problems`：题目
- `problem_tags`：题目标签
- `submissions`：提交记录
- `test_cases`：测试用例

#### 项目相关
- `projects`：项目
- `project_files`：项目文件
- `project_likes`：点赞
- `project_comments`：评论

#### 班级相关
- `classes`：班级
- `class_members`：班级成员
- `assignments`：作业
- `assignment_submissions`：作业提交

#### 订单相关
- `orders`：订单
- `payments`：支付记录
- `coupons`：优惠券
- `subscriptions`：订阅

---

📝 最后更新：2025-01-13
